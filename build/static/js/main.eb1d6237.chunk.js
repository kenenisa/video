(this.webpackJsonpvideo=this.webpackJsonpvideo||[]).push([[0],{103:function(e,t){},105:function(e,t){},120:function(e,t){},122:function(e,t){},126:function(e,t){},128:function(e,t){},131:function(e,t,a){},132:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(48),l=a.n(r),o=(a(60),a(1)),s=(a(61),a(62),a(52));function i(e){var t=e.base,a=e.children,r=Object(n.useState)(t),l=Object(o.a)(r,2),i=l[0],u=l[1],d=Object(n.useState)([t]),f=Object(o.a)(d,2),h=f[0],p=f[1];return c.a.createElement(c.a.Fragment,null,c.a.createElement(m.Provider,{value:{route:i,changeRoute:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t?h[1]&&(u(h[h.length-2]),h.pop(),p(h)):(u(e),p([].concat(Object(s.a)(h),[e])))}}},a))}var m=c.a.createContext({route:"",changeRoute:function(){}});function u(e){var t=e.path,a=e.component;return Object(n.useContext)(m).route.toLowerCase()===t.toLowerCase()?c.a.createElement(c.a.Fragment,null,a()):null}function d(){var e=Object(n.useContext)(m),t=e.route,a=e.changeRoute;return c.a.createElement("header",{className:"mdl-layout__header header"},c.a.createElement("div",{className:"mdl-layout__header-row"},c.a.createElement("div",{className:"back",onClick:function(){return a("",!0)}},c.a.createElement("i",{className:"material-icons"},"arrow_back")),c.a.createElement("span",{className:"mdl-layout-title"},t),c.a.createElement("div",{className:"mdl-layout-spacer"}),c.a.createElement("button",{id:"demo-menu-lower-right",className:"mdl-button mdl-js-button mdl-button--icon"},c.a.createElement("i",{className:"material-icons"},"more_vert")),c.a.createElement("ul",{className:"mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect",htmlFor:"demo-menu-lower-right"},c.a.createElement("li",{className:"mdl-menu__item"},"Some Action"),c.a.createElement("li",{className:"mdl-menu__item"},"Another Action"),c.a.createElement("li",{disabled:!0,className:"mdl-menu__item"},"Disabled Action"),c.a.createElement("li",{className:"mdl-menu__item"},"Yet Another Action"))))}a(63),a(64);var f=c.a.createContext({profile:null,changeProfile:function(){},call:function(){},comgingPro:null,changeComgingPro:function(){},answer:function(){},reject:function(){}});var h=function(e){var t=e.friend,a=e.peers,r=Object(n.useContext)(m).changeRoute,l=Object(n.useContext)(f).changeProfile,s=Object(n.useState)(!1),i=Object(o.a)(s,2),u=i[0],d=i[1],h=function(){a[t.id]?u||d(!0):u&&d(!1)};Object(n.useEffect)((function(){h();var e=setInterval(h,5e3);return function(){clearInterval(e)}}),[]);var p=Math.random();return c.a.createElement("div",{className:"contact"},c.a.createElement("div",{className:"con"},c.a.createElement("span",{onClick:function(){l(t),r("profile")}},c.a.createElement("div",{className:"img-con"},c.a.createElement("div",{className:"img"},c.a.createElement("img",{src:t.photo?t.photo:"profile.png",className:"",alt:"profile"}))),c.a.createElement("div",{className:"text"},c.a.createElement("div",{className:"name"},t.name),c.a.createElement("span",{className:u?"show":"hide"},"Online"),c.a.createElement("div",{className:"log"},c.a.createElement("span",{className:"icon"},c.a.createElement("i",{className:"material-icons"},"call_made")),c.a.createElement("span",{className:"date"}," ,Today")))),c.a.createElement("div",{className:"more"},c.a.createElement("button",{id:"demo-menu-lower-right ".concat(p),className:"btn mdl-button mdl-js-button mdl-button--icon"},c.a.createElement("i",{className:"material-icons"},"more_vert")),c.a.createElement("ul",{className:"mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect","data-mdl-for":"demo-menu-lower-right ".concat(p)},c.a.createElement("li",{className:"mdl-menu__item"},c.a.createElement("button",{className:"mdl-button mdl-js-button"},c.a.createElement("i",{className:"material-icons"},"delete")," Delete")),c.a.createElement("li",{className:"mdl-menu__item"},c.a.createElement("button",{className:"mdl-button mdl-js-button"},c.a.createElement("i",{className:"material-icons"},"edit")," Edit")),c.a.createElement("li",{className:"mdl-menu__item"},c.a.createElement("button",{className:"mdl-button mdl-js-button"},c.a.createElement("i",{className:"material-icons"},"do_not_disturb_alt")," ","Clear History"))))))},p=N().me;function E(e){console.log("[phase 1]: saving: ",e),e&&e.name&&(function(e){var t=JSON.parse(localStorage.other),a=!1;return t.map((function(t){t.name===e.name&&(a=!0)})),a}(e)?(console.log("[phase 1]: user Existes",e),function(e){var t=JSON.parse(localStorage.other),a=[];t.map((function(t){t.name===e.name?a.push(e):a.push(t)})),localStorage.other=JSON.stringify(a)}(e)):(console.log("[phase 1]: user Does NOT Existes",e),function(e){var t=JSON.parse(localStorage.other);console.log(e);var a=t;a.push(e),localStorage.other=JSON.stringify(a)}(e)))}function v(e){console.log("[phase 1]: Started"),console.log("sending request"),e.peers.forEach((function(e){console.log(e),O(e,{type:"request",user:N().me,phase:1})}))}function g(e){return JSON.stringify(e)}function b(e,t){"request"===t.type?function(e,t){console.log("[phase 1]: response Recived",t),E(t),e.peers.forEach((function(e){O(e,{type:"response",user:p,phase:1})}))}(e,t.user):"response"===t.type?E(t.user):console.log("Someting is wrong on the recived data")}function N(){return{me:localStorage.me?JSON.parse(localStorage.me):{},other:localStorage.me?JSON.parse(localStorage.other):[]}}function j(e,t,a){var n=t.remotes[e];return n&&"open"===n._channel.readyState?(n.send(g(a)),!0):(console.log("can not send b/c:",n),!1)}function O(e,t){e&&"open"===e._channel.readyState&&e.send(g(t))}var y=function(e){var t=e.peers,a=Object(n.useState)([]),r=Object(o.a)(a,2),l=r[0],s=r[1];return Object(n.useEffect)((function(){s(N().other)}),[]),c.a.createElement("div",{className:"contacts"},l[0]?"":c.a.createElement("div",{className:"no-contact"},"There are no contacts online yet. Stay online and wait or come back later."),l.map((function(e,a){return c.a.createElement(h,{friend:e,key:a,peers:t})})))};a(65);var w=function(){var e=Object(n.useContext)(m).changeRoute,t=Object(n.useContext)(f),a=t.profile,r=t.call;return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"background"}),c.a.createElement("div",{className:"profile"},c.a.createElement("div",{className:"user"},c.a.createElement("div",{className:"img"},c.a.createElement("img",{src:a.photo,alt:"profile"})),c.a.createElement("div",{className:"name"},a.name),c.a.createElement("div",{className:"buttons"},c.a.createElement("button",{className:"call-btn mdl-button mdl-js-ripple-effect mdl-js-button",onClick:function(){r(a.id)}},c.a.createElement("i",{className:"material-icons"},"call")),c.a.createElement("button",{className:"alert mdl-button mdl-js-ripple-effect mdl-js-button",onClick:function(){return e("contacts")}},c.a.createElement("i",{className:"material-icons"},"notifications_active")))),c.a.createElement("div",{className:"logs"},c.a.createElement("div",{className:"head"},"Logs"),c.a.createElement("div",{className:"log"},c.a.createElement("div",{className:"left"},c.a.createElement("div",{className:"type"},c.a.createElement("i",{className:"material-icons made"},"call_made"),c.a.createElement("span",null," ,Outgoing call")),c.a.createElement("div",{className:"time"},"Today")),c.a.createElement("div",{className:"right"},c.a.createElement("button",{className:"mdl-button mdl-js-ripple-effect mdl-js-button"},c.a.createElement("i",{className:"material-icons"},"delete")))),c.a.createElement("div",{className:"log"},c.a.createElement("div",{className:"left"},c.a.createElement("div",{className:"type"},c.a.createElement("i",{className:"material-icons missed"},"call_missed"),c.a.createElement("span",null," ,Missed call")),c.a.createElement("div",{className:"time"},"Yesterday")),c.a.createElement("div",{className:"right"},c.a.createElement("button",{className:"mdl-button mdl-js-ripple-effect mdl-js-button"},c.a.createElement("i",{className:"material-icons"},"delete")))),c.a.createElement("div",{className:"log"},c.a.createElement("div",{className:"left"},c.a.createElement("div",{className:"type"},c.a.createElement("i",{className:"material-icons received"},"call_received"),c.a.createElement("span",null," ,Received call")),c.a.createElement("div",{className:"time"},"Yesterday")),c.a.createElement("div",{className:"right"},c.a.createElement("button",{className:"mdl-button mdl-js-ripple-effect mdl-js-button"},c.a.createElement("i",{className:"material-icons"},"delete")))))))};var S=function(e){var t=e.peers;return c.a.createElement("main",{className:"mdl-layout__content"},c.a.createElement("div",{className:"page-content"},c.a.createElement(u,{path:"contacts",component:function(){return c.a.createElement(y,{peers:t})}}),c.a.createElement(u,{path:"profile",component:w})))};var C=function(e){var t=e.peers;return c.a.createElement(c.a.Fragment,null,c.a.createElement(d,null),c.a.createElement(S,{peers:t}))},k=(a(66),function(){var e=window.innerWidth;return window.innerHeight>e});var x=function(e){var t=e.msg,a=e.count,r=Object(n.useState)(t),l=Object(o.a)(r,2),s=l[0],i=l[1];return Object(n.useEffect)((function(){i(t),console.log("count is changing: ",a,t)}),[a]),c.a.createElement("div",null,s.map((function(e,t){return c.a.createElement("div",{className:"con",key:t},c.a.createElement("span",{className:"name"},e.name,": "),c.a.createElement("span",{className:"msg"},e.msg))})))};var _=function(e){var t=e.sendText,a=e.msg,r=e.setMsg,l=e.otherFilter,s=e.sendFilter,i=e.count,u=e.sendPause,d=e.otherPause,h=e.stream,p=e.swarm,E=e.sendMute,v=e.otherMute,g=e.endCall,b=Object(n.useContext)(m).changeRoute,j=Object(n.useContext)(f),O=j.comingPro,y=j.profile,w=Object(n.useState)(!1),S=Object(o.a)(w,2),C=S[0],_=S[1],R=Object(n.useState)(!1),T=Object(o.a)(R,2),P=T[0],M=T[1],A=Object(n.useState)(!1),F=Object(o.a)(A,2),J=F[0],L=F[1],W=Object(n.useState)(!1),U=Object(o.a)(W,2),I=U[0],D=U[1],H=Object(n.useState)(!1),q=Object(o.a)(H,2),Y=q[0],z=q[1],B=Object(n.useState)(!1),K=Object(o.a)(B,2),Q=K[0],$=K[1],G=Object(n.useState)(!1),V=Object(o.a)(G,2),X=V[0],Z=V[1],ee=Object(n.useState)(!1),te=Object(o.a)(ee,2),ae=te[0],ne=te[1],ce=Object(n.useState)(!1),re=Object(o.a)(ce,2),le=re[0],oe=re[1],se=Object(n.useState)(""),ie=Object(o.a)(se,2),me=ie[0],ue=ie[1],de=Object(n.useRef)(null),fe=Object(n.useRef)(null),he=Object(n.useRef)(null),pe=function(e){s(O.id?O.id:y.id,e)&&L(e),D(!1)},Ee=function(){Z(!1)};return Object(n.useEffect)((function(){he&&(d?he.current.pause():he.current.play())}),[d]),Object(n.useEffect)((function(){he&&(he.current.muted=!!v)}),[v]),Object(n.useEffect)((function(){fe&&(fe.current.srcObject=h,fe.current.muted=!0,fe.current.play()),he&&(he.current.srcObject=p.remotes[O.id?O.id:y.id].stream,he.current.play())}),[h,p]),c.a.createElement("div",{className:"call"},c.a.createElement("div",{className:"flash ".concat(ae?"show":"")}),c.a.createElement("div",{className:"top"},c.a.createElement("div",{className:"circle text ".concat(P?"active":""),onClick:function(){M(!P),de.current.focus()}},c.a.createElement("i",{className:"material-icons"},"textsms"),c.a.createElement("div",{className:"input ".concat(P?"":"hide")},c.a.createElement("input",{type:"text",placeholder:"Text Message ... ",ref:de,onChange:function(e){ue(e.target.value)},onKeyPress:function(e){if("Enter"===e.nativeEvent.key){if(t(O.id?O.id:y.id,me)){var n=a;n.push({msg:me,name:N().me.name}),r(n)}M(!1),ue("")}},value:me}))),c.a.createElement("div",{className:"filter circle ".concat(J?"active":""),onClick:function(){return D(!I)}},c.a.createElement("i",{className:"material-icons"},"photo_filter"),c.a.createElement("div",{className:"options ".concat(I?"":"hide")},J?c.a.createElement("div",{onClick:function(){return pe(!1)}}," ","None"):"",c.a.createElement("div",{onClick:function(){return pe("sepia")}}," Sepia"),c.a.createElement("div",{onClick:function(){return pe("bnw")}}," ","Black and white"),c.a.createElement("div",{onClick:function(){return pe("inverted")}}," ","Inverted"),c.a.createElement("div",{onClick:function(){return pe("contrast")}}," ","Contrast"))),c.a.createElement("div",{className:"hd circle ".concat(Y?"active":""),onClick:function(){return z(!Y),void(Y||(Z(!0),setTimeout(Ee,3e3)))}},c.a.createElement("i",{className:"material-icons"},"high_quality"),c.a.createElement("div",{className:"msg ".concat(X?"":"hide")},"Trying to Increase Your Camera's Quality")),c.a.createElement("div",{className:"pause circle ".concat(Q?"active":""),onClick:function(){u(O.id?O.id:y.id,!Q)&&($(!Q),fe&&(Q?fe.current.play():fe.current.pause()))}},c.a.createElement("i",{className:"material-icons"},Q?"play_arrow":"pause"))),c.a.createElement("div",{className:"texts"},c.a.createElement(x,{msg:a,count:i})),c.a.createElement("div",{className:"pausing ".concat(d?"":"hide")},c.a.createElement("i",{className:"material-icons"},"pause")),c.a.createElement("div",{className:"videos"},c.a.createElement("div",{className:"other",onClick:function(){return _(!C)}},c.a.createElement("video",{ref:he,alt:"other",className:"video ".concat(k()?"portrate":"landscape"," ").concat(l||"")})),c.a.createElement("div",{className:"my ".concat(k()?"port":"land","  ").concat(C?"hide":"")},c.a.createElement("video",{ref:fe,alt:"call",className:J||""}))),c.a.createElement("div",{className:"bottom"},c.a.createElement("div",{className:"capture circle",onClick:function(){ne(!0),setTimeout((function(){ne(!1)}),500),function(){var e=document.createElement("canvas");e.width=window.innerWidth,e.height=window.innerHeight,e.getContext("2d").drawImage(he.current,0,0,window.innerWidth,window.innerHeight);var t=e.toDataURL("image/png"),a=document.createElement("a");a.href=t,a.download=O.id?O.name:y.name,a.click()}()}},c.a.createElement("i",{className:"material-icons"},"camera_alt")),c.a.createElement("div",{className:"hang-up circle",onClick:function(){g(O.id?O.id:y.id),b("home")}},c.a.createElement("i",{className:"material-icons"},"call_end")),c.a.createElement("div",{className:"mute circle ".concat(le?"active":""),onClick:function(){E(O.id?O.id:y.id,!le)&&oe(!le)}},c.a.createElement("i",{className:"material-icons"},le?"mic_off":"mic"))))};a(67);var R=function(e){var t=e.reject,a=e.callAccepted,r=Object(n.useContext)(f),l=r.comingPro,o=r.answer,s=Object(n.useContext)(m).changeRoute;return Object(n.useEffect)((function(){a(l.id)}),[]),c.a.createElement("div",{className:"coming"},c.a.createElement("div",{className:"name"},c.a.createElement("span",null,l.name)),c.a.createElement("div",{className:"button"},c.a.createElement("div",{className:"reject cirlce",onClick:function(){t(l.id),s("home")}},c.a.createElement("i",{className:"material-icons"},"call_end")),c.a.createElement("div",{className:"answer cirlce",onClick:function(){o(l.id),s("call")}},c.a.createElement("i",{className:"material-icons"},"call"))),c.a.createElement("div",{className:"background"},c.a.createElement("img",{src:l.photo,alt:"user"})))};a(68);var T=function(e){var t=e.state,a=e.abort,r=e.setState,l=Object(n.useContext)(m).changeRoute,s=Object(n.useState)("Connecting ..."),i=Object(o.a)(s,2),u=i[0],d=i[1],h=Object(n.useContext)(f).profile;Object(n.useEffect)((function(){"rejected"===t.type?(d("Your call was Rejected!"),setTimeout(p,5e3)):"accepted"===t.type?d("Ringing ..."):d("Connecting ...")}),[t]);var p=function(){r({type:null,data:null}),l("profile")};return c.a.createElement("div",{className:"going"},c.a.createElement("audio",{autoPlay:!0,loop:!0},c.a.createElement("source",{src:"tu.mp3",type:"audio/mpeg"})),c.a.createElement("div",{className:"status"},c.a.createElement("span",null,u)),c.a.createElement("div",{className:"button",onClick:function(){l("contacts"),a(h.id)}},c.a.createElement("i",{className:"material-icons"},"call_end")),c.a.createElement("div",{className:"video"},c.a.createElement("img",{src:"video-other.jpg",alt:"video"})))};a(69),a(70);var P=function(){var e=Object(n.useContext)(m).changeRoute;return c.a.createElement("div",{className:"welcome"},c.a.createElement("div",{className:"con"},c.a.createElement("div",{className:"text"},"Wellcome"),c.a.createElement("div",{className:"intro"},c.a.createElement("div",{className:"slide s1"},c.a.createElement("div",{className:"icon"},c.a.createElement("i",{className:"material-icons"},"network_check")),c.a.createElement("div",{className:"Title"},"Fast"),c.a.createElement("div",{className:"des"},"Modern day tech enables this app to directly connect to your firends which makes it Really Fast!")),c.a.createElement("div",{className:"slide s2"},c.a.createElement("div",{className:"icon"},c.a.createElement("i",{className:"material-icons"},"security")),c.a.createElement("div",{className:"Title"},"Secure"),c.a.createElement("div",{className:"des"},"Unlike other apps, your data gets saved on your divice without a server Which makes it Super Secure!")),c.a.createElement("div",{className:"slide s3"},c.a.createElement("div",{className:"icon"},c.a.createElement("i",{className:"material-icons"},"sentiment_very_satisfied")),c.a.createElement("div",{className:"Title"},"Fun"),c.a.createElement("div",{className:"des"},"HD video chating and streaming while you get the best expirance, is Surely a great Fun!"))),c.a.createElement("div",{className:"buttons"},c.a.createElement("button",{className:"login",onClick:function(){return e("login")}},"Log In"),c.a.createElement("button",{className:"signup",onClick:function(){return e("signup")}},"Sign Up"))))};a(71);var M=function(){var e=Object(n.useContext)(m).changeRoute,t=Object(n.useState)(""),a=Object(o.a)(t,2),r=a[0],l=a[1],s=Object(n.useState)(""),i=Object(o.a)(s,2),u=i[0],d=i[1],f=Object(n.useState)(null),h=Object(o.a)(f,2),p=h[0],E=h[1],v=Object(n.useState)(""),g=Object(o.a)(v,2),b=g[0],j=g[1],O=Object(n.useState)({name:!1,password:!1,confirm:!1,photo:!1}),y=Object(o.a)(O,2),w=y[0],S=y[1],C=Object(n.useState)(!1),k=Object(o.a)(C,2),x=k[0],_=k[1];return c.a.createElement("div",{className:"Signup"},c.a.createElement("div",{className:"con"},c.a.createElement("div",{className:"text"},"Signup"),c.a.createElement("div",{className:"forms"},w.name||w.password||w.confirm||w.photo?c.a.createElement("div",{className:"error"},"Please fill every field with the aproprate information."):x?c.a.createElement("div",{className:"error msg"},x):"",c.a.createElement("input",{type:"text",onChange:function(e){l(e.nativeEvent.target.value)},placeholder:"Username",className:"".concat(w.name?"br":""," name"),value:r}),c.a.createElement("input",{type:"password",onChange:function(e){d(e.nativeEvent.target.value)},placeholder:"Password",className:"".concat(w.password?"br":""," password"),value:u}),c.a.createElement("input",{type:"password",onChange:function(e){j(e.nativeEvent.target.value)},placeholder:"Confirm Password",className:"".concat(w.confirm?"br":""," confirm"),value:b}),c.a.createElement("div",{className:"provide-photo"},c.a.createElement("input",{type:"file",placeholder:"Provide Photo",className:"photo",onChange:function(e){if(0===e.target.files[0].type.search("image")){var t=new FileReader;t.readAsDataURL(e.target.files[0]),t.onloadend=function(e){E(t.result)},_(!1)}else _("The provided file is not an image. Please provide a file with jpg/png extention.")}}),c.a.createElement("button",{className:"mdl-button mdl-js-button fake-button"},c.a.createElement("i",{className:"material-icons"},"add"),"Add Photo")),r||p?c.a.createElement("div",{className:"user"},c.a.createElement("div",{className:"header"},"Signing up as..."),c.a.createElement("div",{className:"img"},c.a.createElement("i",{className:"material-icons"},"access_time"),c.a.createElement("img",{src:p||"profile.png",alt:"".concat(r,"'s profile")})),c.a.createElement("div",{className:"name"},r)):""),c.a.createElement("div",{className:"buttons"},c.a.createElement("button",{className:"login",onClick:function(){return e("welcome")}},"Cancle"),c.a.createElement("button",{className:"signup",onClick:function(){var t={name:!r&&"empty",password:!u&&"empty",confirm:!b&&"empty"};if(r&&u&&b)if(u!==b)_("Password Confarmation doesn't match with the given password.");else{var a=N().me;a.name=r,a.password=u,a.photo=p||null,localStorage.me=JSON.stringify(a),e("home"),_(!1)}S(t)}},"Signup"))))};a(72);var A=function(){var e=Object(n.useContext)(m).changeRoute,t=Object(n.useState)(""),a=Object(o.a)(t,2),r=a[0],l=a[1],s=Object(n.useState)(""),i=Object(o.a)(s,2),u=i[0],d=i[1],f=Object(n.useState)({name:!1,password:!1,confirm:!1,photo:!1}),h=Object(o.a)(f,2),p=h[0],E=h[1],v=Object(n.useState)(!1),g=Object(o.a)(v,2),b=g[0],N=g[1];return c.a.createElement("div",{className:"Login"},c.a.createElement("div",{className:"con"},c.a.createElement("div",{className:"text"},"Login"),c.a.createElement("div",{className:"forms"},p.name||p.password||p.confirm||p.photo?c.a.createElement("div",{className:"error"},"Please fill every field with the aproprate information."):b?c.a.createElement("div",{className:"error"},b):"",c.a.createElement("input",{type:"text",onChange:function(e){l(e.nativeEvent.target.value)},placeholder:"Username",className:"".concat(p.name?"br":""," name"),value:r}),c.a.createElement("input",{type:"password",onChange:function(e){d(e.nativeEvent.target.value)},placeholder:"Password",className:"".concat(p.password?"br":""," password"),value:u})),c.a.createElement("div",{className:"buttons"},c.a.createElement("button",{className:"login",onClick:function(){return e("welcome")}},"Cancle"),c.a.createElement("button",{className:"signup",onClick:function(){var t={name:!r&&"empty",password:!u&&"empty"};if(r&&u){var a=JSON.parse(localStorage.me);r.toLowerCase()===a.name.toLowerCase()&&u.toLowerCase()===a.password.toLowerCase()?e("Home"):N("Username or Password is not Correct.")}E(t)}},"Login"))))},F=a(18),J=a(19),L=a(53),W=a(49),U=a(54),I=function(e){function t(){return Object(F.a)(this,t),Object(L.a)(this,Object(W.a)(t).apply(this,arguments))}return Object(U.a)(t,e),Object(J.a)(t,[{key:"render",value:function(){return c.a.createElement("canvas",null)}},{key:"componentDidMount",value:function(){var e=document.querySelector("canvas");e.width=window.innerWidth,e.height=window.innerHeight;var t=e.getContext("2d"),a=window.innerWidth,n=window.innerHeight;window.addEventListener("resize",(function(){e.width=window.innerWidth+100,e.height=window.innerHeight+100}));for(var c=function(){function e(a,n,c,r,l,o){Object(F.a)(this,e),this.x=a,this.y=n,this.dx=c,this.dy=r,this.radius=l,this.color=o,this.minRadius=l,this.draw=function(){t.beginPath(),t.arc(this.x,this.y,this.radius,0,2*Math.PI,!1),t.fillStyle=this.color,t.fill()}}return Object(J.a)(e,[{key:"update",value:function(){(this.x+this.radius>a+100||this.x-i<-100)&&(this.dx=-this.dx),(this.y+this.radius>a+100||this.y-i<-100)&&(this.dy=-this.dy),this.x+=this.dx,this.y+=this.dy,this.draw()}}]),e}(),r=function(){function e(t,a,n,c){Object(F.a)(this,e),this.x=t,this.y=a,this.radius=n,this.color=h,this.minRadius=n,this.blink=c,this.light=Math.random(),this.dir=.001}return Object(J.a)(e,[{key:"draw",value:function(){t.beginPath(),t.arc(this.x,this.y,this.radius,0,2*Math.PI,!1),t.fillStyle="rgba(255,255,255,"+this.light+")",t.fill()}},{key:"update",value:function(){this.blink&&(this.light+=this.dir,this.light>=1?this.light=-this.dir:this.light<=0&&(this.light=this.dir)),this.draw()}}]),e}(),l=[],o=[],s=0;s<20;s++){var i=1.5*(Math.random()+.2),m=Math.random()*(a-2*i)+i,u=Math.random()*(n-2*i)+i,d=8*(Math.random()-.5),f=8*(Math.random()-.5),h=["rgba(255,255,255,1)","rgba(255,255,255,0.5)","rgba(255,255,255,0.3)"];l.push(new c(m,u,d,f,i,h[Math.floor(Math.random()*h.length)]))}for(var p=0;p<.25*a;p++){var E,v=Math.random()+1e-4,g=Math.random()*(a-2*v)+v,b=Math.random()*(n-2*v)+v;E=Math.random()>.2,o.push(new r(g,b,v,E))}!function e(){requestAnimationFrame(e),t.fillStyle="rgba(0, 0, 40,0.25)",t.fillRect(0,0,a,n);for(var c=0;c<l.length;c++)l[c].update();for(var r=0;r<o.length;r++)o[r].update()}()}}]),t}(c.a.Component);var D=function(){return c.a.createElement("div",{className:"pages"},c.a.createElement("div",{className:"bg"},c.a.createElement(I,null)),c.a.createElement(u,{path:"welcome",component:function(){return c.a.createElement(P,null)}}),c.a.createElement(u,{path:"signup",component:function(){return c.a.createElement(M,null)}}),c.a.createElement(u,{path:"login",component:function(){return c.a.createElement(A,null)}}))},H=(a(73),c.a.createContext({toast:"",createToast:function(){}}));var q=function(){var e=Object(n.useContext)(m).changeRoute,t=Object(n.useContext)(H).createToast,a=Object(n.useState)(!1),r=Object(o.a)(a,2),l=r[0],s=r[1];return Object(n.useEffect)((function(){navigator.onLine&&s(!0)}),[]),c.a.createElement("div",{className:"home"},c.a.createElement("div",{className:"con"},c.a.createElement("div",{className:"mode"},"Select mode"),c.a.createElement("div",{className:"card call",onClick:function(){l?e("contacts"):t("You are currently offline. refresh the page when you are connected to some network","r")}},c.a.createElement("i",{className:"material-icons"},"call"),"Call"),c.a.createElement("div",{className:"card stream",onClick:function(){l?e("stream"):t("You are currently offline. refresh the page when you are connected to some network","r")}},c.a.createElement("i",{className:"material-icons"},"public"),"Stream")))};a(74),a(75);var Y=function(e){var t=e.streams,a=e.flag,r=e.setWatchStream,l=Object(n.useState)([]),s=Object(o.a)(l,2),i=s[0],u=s[1],d=Object(n.useContext)(m).changeRoute;return Object(n.useEffect)((function(){u(t)}),[a]),c.a.createElement("div",null,i[0]?"":c.a.createElement("div",{className:"err"},"There are no streams avilable right now, but you can create your own below!"),i.map((function(e,t){return c.a.createElement("div",{className:"ind",key:t,onClick:function(){return function(e){r(e),d("watch")}(e)}},c.a.createElement("div",{className:"topic"},e.data.data.topic),c.a.createElement("div",{className:"body"},e.data.data.body))})))};a(76);var z=function(e){var t=e.setState,a=Object(n.useState)(""),r=Object(o.a)(a,2),l=r[0],s=r[1],i=Object(n.useState)(""),u=Object(o.a)(i,2),d=u[0],f=u[1],h=Object(n.useContext)(m).changeRoute;return c.a.createElement("div",{className:"create"},c.a.createElement("h2",null,"Create your own stream"),c.a.createElement("input",{className:"",type:"text",placeholder:"Topic",onChange:function(e){return s(e.target.value)},value:l}),c.a.createElement("textarea",{placeholder:"Discription about the Topic",col:"30",row:"15",onChange:function(e){return f(e.target.value)},value:d}),c.a.createElement("button",{onClick:function(){return t(!0)},className:"ff"},"Cancle"),c.a.createElement("button",{onClick:function(){""!==l&&""!==d&&(localStorage.stream=g({topic:l,body:d}),h("live"))}},"Create"))};var B=function(e){var t=e.streams,a=e.flag,r=e.setWatchStream,l=Object(n.useState)(!0),s=Object(o.a)(l,2),i=s[0],m=s[1];return c.a.createElement(c.a.Fragment,null,c.a.createElement(d,null),c.a.createElement("main",{className:"mdl-layout__content"},c.a.createElement("div",{className:"page-content"},c.a.createElement("div",{className:"str"},i?c.a.createElement("div",null,c.a.createElement(Y,{streams:t,flag:a,setWatchStream:r}),c.a.createElement("button",{onClick:function(){return m(!1)},className:"mdl-button mdl-js-button mdl-button--raised mdl-button--accent mdl-js-ripple-effect btn"},c.a.createElement("i",{className:"material-icons"},"settings_input_antenna"),"CREATE STREAM")):c.a.createElement(z,{setState:m})))))};a(77);var K=function(e){var t=e.stream,a=e.sendStream,r=Object(n.useRef)(null),l=Object(n.useContext)(m).changeRoute;Object(n.useEffect)((function(){t&&r&&(r.current.srcObject=t,r.current.muted=!0,r.current.play()),o()}),[t,r]);var o=function(){setInterval((function(){var e;a({data:(e=localStorage.stream,JSON.parse(e)),me:N().me})}),5e3)};return c.a.createElement("div",{className:"live"},c.a.createElement("video",{ref:r}),c.a.createElement("button",{onClick:function(){l("home")}},c.a.createElement("i",{className:"material-icons"},"close")))},Q=(a(78),null);var $=function(e){var t=e.watchStream,a=e.swarm,r=Object(n.useRef)(null),l=Object(n.useContext)(m).changeRoute;return Object(n.useEffect)((function(){var e=a.remotes[t.data.me.id];Q=e,e.stream.getTracks()[0].enabled=!0,r&&(r.current.srcObject=e.stream,r.current.play())}),[t,a,r]),c.a.createElement("div",{className:"watch"},c.a.createElement("video",{ref:r}),c.a.createElement("button",{onClick:function(){Q.stream.getTracks()[0].enabled=!1,l("home")}},c.a.createElement("i",{className:"material-icons"},"close")))},G=a(50),V=a.n(G),X=a(51),Z=a.n(X),ee=V()("vid-chat",["https://signalhub-hzbibrznqa.now.sh","https://signalhub-jccqtwhdwc.now.sh"]),te=N().me;localStorage.me||(localStorage.me=JSON.stringify(te)),localStorage.other||(localStorage.other=JSON.stringify([]));var ae=function(e){var t=Z()(ee,{stream:e,uuid:localStorage.me?JSON.parse(localStorage.me).id:null});return te.id=t.me,localStorage.me=JSON.stringify(te),t};var ne=function(e){var t=e.state,a=e.fakeRoute,r=Object(n.useContext)(m).changeRoute;return Object(n.useEffect)((function(){t&&("ring"===t?r("coming"):"connected"===t?r("call"):"abort"===t?r("home"):"end"===t&&r("home"))}),[t]),Object(n.useEffect)((function(){""!==a&&r(a)}),[a]),c.a.createElement(c.a.Fragment,null)};a(131);var ce=function(){var e=Object(n.useContext)(H),t=e.toast,a=e.createToast,r=Object(n.useState)(!1),l=Object(o.a)(r,2),s=l[0],i=l[1];Object(n.useEffect)((function(){""!==t.text&&(i(!0),setTimeout(m,3e3))}),[t]);var m=function(){i(!1),setTimeout(u,500)},u=function(){a("","")};return c.a.createElement("div",{className:"".concat(t.type," toast ").concat(s?"show":"hide")},t.text)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(c.a.createElement((function(){var e=Object(n.useState)(null),t=Object(o.a)(e,2),a=t[0],r=t[1],l=Object(n.useState)(null),s=Object(o.a)(l,2),m=s[0],d=s[1],h=Object(n.useState)({type:null,data:null}),p=Object(o.a)(h,2),E=p[0],g=p[1],y=Object(n.useState)({name:"",photo:""}),w=Object(o.a)(y,2),S=w[0],k=w[1],x=Object(n.useState)({name:"",photo:""}),P=Object(o.a)(x,2),M=P[0],A=P[1],F=Object(n.useState)({text:"",type:""}),J=Object(o.a)(F,2),L=J[0],W=J[1],U=Object(n.useState)(""),I=Object(o.a)(U,2),Y=I[0],z=I[1],Q=Object(n.useState)([]),G=Object(o.a)(Q,2),V=G[0],X=G[1],Z=Object(n.useState)(!1),ee=Object(o.a)(Z,2),te=ee[0],re=ee[1],le=Object(n.useState)(0),oe=Object(o.a)(le,2),se=oe[0],ie=oe[1],me=Object(n.useState)(!1),ue=Object(o.a)(me,2),de=ue[0],fe=ue[1],he=Object(n.useState)(!1),pe=Object(o.a)(he,2),Ee=pe[0],ve=pe[1],ge=Object(n.useState)([]),be=Object(o.a)(ge,2),Ne=be[0],je=be[1],Oe=Object(n.useState)(0),ye=Object(o.a)(Oe,2),we=ye[0],Se=ye[1],Ce=Object(n.useState)(null),ke=Object(o.a)(Ce,2),xe=ke[0],_e=ke[1],Re=function(e,t){W({text:e,type:t})};Object(n.useEffect)((function(){"ring"===E.type&&A(E.data.who.pro)}),[E]),Object(n.useEffect)((function(){navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then((function(e){r(e)})).catch((function(e){return console.log(e)}))}),[]),Object(n.useEffect)((function(){a&&d(ae(a))}),[a]),Object(n.useEffect)((function(){navigator.onLine?(m&&(m.on("connect",(function(e,t){if(console.log("peer connected",t),e.on("data",(function(e){if(e=JSON.parse(e.toString()),console.log(e),1===e.phase)b(m,e);else if(2===e.phase)g(function(e,t){if("offer"===t.type)return t.who.your===N().me.id?(console.log("ringing the call from: "),{type:"ring",data:t}):{type:null,data:null};if("answer"===t.type){var a=e.remotes[t.who];return a.stream.getTracks()[0].enabled=!0,console.log("Answer recived from: ",a),{type:"connected",data:t}}return"rejected"===t.type?{type:"rejected",data:t}:"accepted"===t.type?{type:"accepted",data:t}:"end"===t.type?(e.remotes[t.who].stream.getTracks()[0].enabled=!1,console.log("call ended"),{type:"end",data:t}):{type:"abort",data:t}}(m,e));else if(3===e.phase)!function(e){if("text"===e.type){var t=V;t.push(e.data),X(t),ie(V.length)}else"filter"===e.type?re(e.data):"pause"===e.type?fe(e.data):"mute"===e.type?ve(e.data):console.log("phase 3 data type is not correct")}(e);else if(4===e.phase){if(console.log(e),!function(e,t){var a=!1;return e.map((function(e){e.data.me.id===t.data.me.id&&(a=!0)})),a}(Ne,e)){var t=Ne;t.push(e),je(t),Se(Ne.length)}}else console.log("phase is not correct")})),e.stream){e.stream.getTracks()[0].enabled=!1;var a=document.createElement("audio");a.srcObject=e.stream,a.play(),document.body.appendChild(a)}})),v(m),setInterval((function(){console.log("[peers]: ",m.peers.length),v(m)}),3e3)),console.log(m)):console.error("YOU ARE OFFLINE")}),[m]);var Te=function(){z("")},Pe=function(e){j(e,m,{type:"rejected",who:m.me,phase:2})},Me=function(e){j(e,m,{type:"abort",who:m.me,phase:2})},Ae=function(e){j(e,m,{type:"accepted",who:m.me,phase:2})},Fe=function(e){j(e,m,{type:"end",who:m.me,phase:2})},Je=function(e,t){if(""!==t&&!j(e,m,{type:"text",data:{name:N().me.name,msg:t},phase:3}))return Re("Unable to send text, Try Again!","r"),!1;return!0},Le=function(e,t){return!!j(e,m,{type:"filter",data:t,phase:3})||(Re("Unable to set Filter, Try Again!","r"),!1)},We=function(e,t){return!!j(e,m,{type:"pause",data:t,phase:3})||(Re("Unable to Pause, Try Again!","r"),!1)},Ue=function(e,t){return!!j(e,m,{type:"mute",data:t,phase:3})||(Re("Unable to Mute, Try Again!","r"),!1)},Ie=function(e){m.peers.map((function(t){O(t,{type:"stream",data:e,phase:4})}))};return c.a.createElement("div",{className:"mdl-layout mdl-js-layout mdl-layout--fixed-header"},c.a.createElement(f.Provider,{value:{profile:S,changeProfile:k,call:function(e){var t=j(e,m,{type:"offer",who:{your:e,me:m.me,pro:N().me},phase:2});t?(z("going"),setTimeout(Te,2e3),console.log("Calling to: ",t)):Re("User is not Online right now","w")},comingPro:M,changeComingPro:A,answer:function(e){var t=m.remotes[e];j(e,m,{type:"answer",who:m.me,phase:2})?t.stream.getTracks()[0].enabled=!0:Re("There is a netWork defficulty now, can't Answer!","r")},reject:Pe}},c.a.createElement(H.Provider,{value:{toast:L,createToast:Re}},c.a.createElement(ce,null),c.a.createElement(i,{base:N().me.name?"home":"welcome"},c.a.createElement(ne,{state:E.type,fakeRoute:Y}),c.a.createElement(u,{path:"watch",component:function(){return c.a.createElement($,{watchStream:xe,swarm:m})}}),c.a.createElement(u,{path:"live",component:function(){return c.a.createElement(K,{stream:a,sendStream:Ie})}}),c.a.createElement(u,{path:"stream",component:function(){return c.a.createElement(B,{streams:Ne,flag:we,setWatchStream:_e})}}),c.a.createElement(u,{path:"contacts",component:function(){return c.a.createElement(C,{peers:m?m.remotes:{}})}}),c.a.createElement(u,{path:"profile",component:function(){return c.a.createElement(C,null)}}),c.a.createElement(u,{path:"call",component:function(){return c.a.createElement(_,{sendText:Je,msg:V,setMsg:X,otherFilter:te,sendFilter:Le,count:se,sendPause:We,otherPause:de,stream:a,swarm:m,sendMute:Ue,otherMute:Ee,endCall:Fe})}}),c.a.createElement(u,{path:"coming",component:function(){return c.a.createElement(R,{reject:Pe,callAccepted:Ae})}}),c.a.createElement(u,{path:"going",component:function(){return c.a.createElement(T,{state:E,abort:Me,setState:g})}}),c.a.createElement(u,{path:"welcome",component:function(){return c.a.createElement(D,null)}}),c.a.createElement(u,{path:"login",component:function(){return c.a.createElement(D,null)}}),c.a.createElement(u,{path:"signup",component:function(){return c.a.createElement(D,null)}}),c.a.createElement(u,{path:"home",component:function(){return c.a.createElement(q,null)}})))))}),null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},55:function(e,t,a){e.exports=a(132)},60:function(e,t,a){},61:function(e,t,a){},62:function(e,t,a){},63:function(e,t,a){},64:function(e,t,a){},65:function(e,t,a){},66:function(e,t,a){},67:function(e,t,a){},68:function(e,t,a){},69:function(e,t,a){},70:function(e,t,a){},71:function(e,t,a){},72:function(e,t,a){},73:function(e,t,a){},74:function(e,t,a){},75:function(e,t,a){},76:function(e,t,a){},77:function(e,t,a){},78:function(e,t,a){},83:function(e,t){},85:function(e,t){},97:function(e,t){}},[[55,1,2]]]);
//# sourceMappingURL=main.eb1d6237.chunk.js.map